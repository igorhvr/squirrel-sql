<?xml version="1.0"?>
<!--
    This is an Apache Ant build file to build the macosx plugin
    for distribution.
-->
<project name="plugin-macosx" default="build" basedir=".">

    <target name="init">
        <tstamp/>
		<property name="internal_name" value="macosx"/>
		<property name="version" value="0.1"/>

        <property name="build_dir" value="build"/>
        <property name="work_dir" value="${build_dir}/work"/>
        <property name="dist_dir" value="${build_dir}/dist"/>
        <property name="plugin_dist_dir" value="${dist_dir}/${internal_name}"/>

        <property name="debug" value="on"/>
        <property name="optimize" value="off"/>
        <property name="deprecation" value="on"/>


        <echo message="---------------- ${internal_name} ${version} ----------------"/>
        
        <property environment="env"/>
    </target>
    <!--
    ==================================================================
    Compile the plugin.
    No parameters.
    ==================================================================
    -->
    <target name="build" depends="init">
        <property name="obj_dir" value="${work_dir}/obj"/>
        
        <mkdir dir="${obj_dir}"/>
        <mkdir dir="${plugin_dist_dir}"/>

        <javac  srcdir="src"
                destdir="${obj_dir}"
                deprecation="${deprecation}"
                debug="${debug}"
                optimize="${optimize}"
                includeJavaRuntime="yes">
            <classpath>
                <fileset dir="${basedir}">
                    <include name="fw.jar"/>
                    <include name="squirrel-sql.jar"/>
                </fileset>
            </classpath>
        </javac>
        <copy todir="${obj_dir}" >
            <fileset dir="src" >
                <include name="**/*.gif"/>
                <include name="**/*.jpg"/>
                <include name="**/*.jpeg"/>
                <include name="**/*.xml"/>
                <include name="**/*.properties"/>
            </fileset>
        </copy>

        <jar jarfile="${dist_dir}/${internal_name}.jar" compress="false">
            <fileset dir="${obj_dir}">
                <include name="**/*.*"/>
            </fileset>
        </jar>
		
		<copy todir="${plugin_dist_dir}" >
			<fileset dir="doc" >
				<include name="**/*.*"/>
			</fileset>
		</copy>
</target>

</project>

